# Микросервис WB для платформы ECOM

## Особенности проекта
* Версия python 3.11
* pre-commit хуки(ruff)
* rabbit-mq
* postgres



## Тестовая песочница
В проекте используется **тестовая песочница**, для отладки приложения.
Дополнять ее по мере необходимости и обновлении API Wildberries. В тестах стартует автоматически на порте 8083. В обычном режиме использует ключи которые начинаются на **API_**.
При использовании внутреннего механизма тестирования(ключи test в хендлерах), применяются ключи которые начинаются на **SANDBOX_**.
* В данный момент обрабатывает такие случаи как:
1. Проверка query параметров запроса
2. Проверка body запроса
3. Проверка заголовка с авторизацией
4. Генерация данных через фабрики

* Важно!!! Тестовая песочница использует отдельный файл с переменными окружения **.env_tests**. Для запуска тестов
с переменными окружения из файла **env_tests**
должна быть установлена библиотека pytest-env(не ниже 1.1.3),
а в файле pytest.ini прописана переменная env с указанием файла с тестовыми переменными окружения.
Перед запуском тестов проверьте, что необходимые зависимости установлены.

### Запуск тестового сервера(из корня) для ручного тестирования.
```shell
python3 core/tests/test_server.py
```

## Запуск проекта
* Важно!!! Перед запуском создать .env файл на базе example.env
```shell
python3 main.py
```

## Запуск тестов(из корня)
* Перед запуском должна быть настроена тестовая база данных!!!
```shell
pytest
```
